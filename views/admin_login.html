<section style="max-width:460px;margin:40px auto;background:#fff;border:1px solid var(--line);border-radius:16px;padding:22px;box-shadow:0 12px 30px rgba(31,52,70,.08)">
  <div class="badge">Admin</div>
  <h1 style="font-family:'Sora',sans-serif;font-size:30px;margin-top:10px">Connexion</h1>
  <p class="muted" style="margin-top:8px">Connectez-vous pour gerer les produits NoSQL.</p>

  <form id="adminLoginForm" style="margin-top:14px;display:grid;gap:10px">
    <input id="adminUser" type="text" placeholder="Utilisateur" required style="border:1px solid var(--line);border-radius:10px;padding:12px;font-family:inherit"/>
    <input id="adminPass" type="password" placeholder="Mot de passe" required style="border:1px solid var(--line);border-radius:10px;padding:12px;font-family:inherit"/>
    <button class="btn btn-dark" type="submit" style="width:100%">Se connecter</button>
  </form>
  <p id="loginMsg" style="margin-top:10px;color:#b42318;font-size:13px"></p>
</section>

<script>
document.getElementById('adminLoginForm').addEventListener('submit', async function(e){
  e.preventDefault();
  const msg = document.getElementById('loginMsg');
  msg.textContent = '';
  try {
    const res = await fetch('/admin/login/', {
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body: JSON.stringify({
        username: document.getElementById('adminUser').value.trim(),
        password: document.getElementById('adminPass').value
      })
    });
    const out = await res.json();
    if (!out.ok) {
      msg.textContent = out.error || 'Connexion impossible';
      return;
    }
    location.href = '/admin/';
  } catch (err) {
    msg.textContent = 'Erreur reseau';
  }
});
</script>
